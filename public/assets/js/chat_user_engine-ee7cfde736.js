class ChatUserEngine{constructor(e,s,t,o,a){this.chatBox=$("#"+e),this.userEmail=s,this.recieverEmail=t,this.fromId=o,this.toId=a,this.socket=io.connect("http://localhost:5000"),this.userEmail&&this.connectionHandler()}connectionHandler(){let e=this;this.socket.on("connect",(function(){console.log("Connection established using sockets"),e.socket.emit("handshake",{myId:e.userEmail,chatroom:"codeial"})})),e.socket.on("user_joined",(function(e){console.log("A user has joined",e)})),$("#send-message").click((function(s){s.preventDefault();let t=$("#chat-message-input").val();$("#chat-message-input").val(""),""!=t&&e.socket.emit("send-message",{message:t,from:e.userEmail,to:e.recieverEmail,fromId:e.fromId,toId:e.toId,chatroom:"codeial"})})),e.socket.on("receive_message",(function(s){if(e.userEmail==s.to){let e=$("<li>"),t="other-message";e.append($("<span>",{html:s.message})),e.addClass(t),$("#chat-message-list").append(e)}if(e.userEmail==s.from){let e=$("<li>"),t="self-message";e.append($("<span>",{html:s.message})),e.addClass(t),$("#chat-message-list").append(e)}}))}}